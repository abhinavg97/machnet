file(GLOB_RECURSE BENCHMARK_FILES "${PROJECT_SOURCE_DIR}/src/channel_bench.cc")

foreach (bench_name IN LISTS BENCHMARK_FILES)
    get_filename_component(bench_bin ${bench_name} NAME_WE)
    add_executable(${bench_bin} ${bench_name})
    target_link_libraries(${bench_bin} PUBLIC
            core machnet_shim glog gtest benchmark ${LIBDPDK_LIBRARIES} hugetlbfs rt)
    add_test(NAME ${bench_bin} COMMAND ${bench_bin})
endforeach ()
